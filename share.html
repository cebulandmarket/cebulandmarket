<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Property Story — CebuLandMarket</title>
  <meta name="description" content="Every property has a story. See the owner's vision for this land." id="metaDesc">
  <meta property="og:title" content="Property Story — CebuLandMarket" id="ogTitle">
  <meta property="og:description" content="Every property has a story. See the owner's vision for this land." id="ogDesc">
  <meta property="og:image" content="" id="ogImage">
  <meta property="og:type" content="website">
  <link rel="icon" type="image/png" href="favicon.png">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      color: #1a1a2e;
      background: #fff;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    /* Hero */
    .hero {
      position: relative;
      height: 85vh;
      min-height: 500px;
      overflow: hidden;
    }
    .hero img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .hero-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.55) 100%);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 2.5rem;
    }
    .hero-badge {
      display: inline-block;
      background: #e8b004;
      color: #fff;
      font-weight: 700;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      padding: 0.35rem 0.85rem;
      border-radius: 3px;
      margin-bottom: 0.75rem;
      width: max-content;
    }
    .hero h1 {
      color: #fff;
      font-size: 2.5rem;
      font-weight: 800;
      line-height: 1.15;
      margin-bottom: 0.5rem;
      max-width: 700px;
    }
    .hero-sub {
      color: rgba(255,255,255,0.9);
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }
    .hero-price {
      color: #fff;
      font-size: 2rem;
      font-weight: 700;
    }
    .hero-price span {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.85;
      margin-left: 0.5rem;
    }

    /* Quick Stats */
    .quick-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1px;
      background: #e5e7eb;
      border-bottom: 1px solid #e5e7eb;
    }
    .stat {
      background: #fff;
      padding: 1.25rem 1.5rem;
      text-align: center;
    }
    .stat-value {
      font-size: 1.25rem;
      font-weight: 700;
      color: #1a1a2e;
    }
    .stat-label {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #6b7280;
      margin-top: 0.2rem;
    }

    /* Sections */
    .section {
      max-width: 1100px;
      margin: 0 auto;
      padding: 3.5rem 1.5rem;
    }
    .section-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      position: relative;
      padding-bottom: 0.75rem;
    }
    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 50px;
      height: 3px;
      background: #e8b004;
      border-radius: 2px;
    }

    /* Story */
    .story p {
      font-size: 1.05rem;
      color: #374151;
      max-width: 750px;
      margin-bottom: 1rem;
    }

    /* Vision cards */
    .vision-section {
      background: linear-gradient(135deg, #fefce8 0%, #fff7ed 50%, #f0fdf4 100%);
      margin: 0;
      max-width: 100%;
      padding: 3.5rem 1.5rem;
    }
    .vision-inner {
      max-width: 1100px;
      margin: 0 auto;
    }
    .vision-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-top: 1rem;
    }
    .vision-card {
      padding: 1.5rem;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      border-top: 4px solid #e8b004;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .vision-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }
    .vision-card:nth-child(1) { border-top-color: #16a34a; }
    .vision-card:nth-child(2) { border-top-color: #7c3aed; }
    .vision-card:nth-child(3) { border-top-color: #ea580c; }
    .vision-card:nth-child(4) { border-top-color: #0284c7; }
    .vision-card:nth-child(5) { border-top-color: #b45309; }
    .vision-card:nth-child(6) { border-top-color: #0d9488; }
    .vision-card:nth-child(7) { border-top-color: #e11d48; }
    .vision-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      display: block;
    }
    .vision-card h3 {
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 0.4rem;
    }
    .vision-card p {
      color: #6b7280;
      font-size: 0.92rem;
      line-height: 1.5;
    }

    /* Features */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 0.75rem;
    }
    .feature-item {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.65rem 0.85rem;
      background: #f9fafb;
      border-radius: 8px;
      font-size: 0.95rem;
      color: #374151;
    }
    .feature-check {
      width: 20px;
      height: 20px;
      background: #16a34a;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .feature-check svg {
      width: 12px;
      height: 12px;
      fill: #fff;
    }

    /* Gallery */
    .gallery-section { background: #f9fafb; }
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 0.75rem;
    }
    .gallery-item {
      border-radius: 10px;
      overflow: hidden;
      cursor: pointer;
      aspect-ratio: 4/3;
      background: #e5e7eb;
    }
    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    .gallery-item:hover img {
      transform: scale(1.05);
    }

    /* Lightbox */
    .lightbox {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.92);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    .lightbox.active { display: flex; }
    .lightbox img {
      max-width: 90vw;
      max-height: 80vh;
      object-fit: contain;
      border-radius: 4px;
    }
    .lightbox-close {
      position: absolute;
      top: 1rem;
      right: 1.5rem;
      background: none;
      border: none;
      color: #fff;
      font-size: 2rem;
      cursor: pointer;
      line-height: 1;
      padding: 0.5rem;
    }
    .lightbox-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255,255,255,0.15);
      border: none;
      color: #fff;
      font-size: 2rem;
      cursor: pointer;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      transition: background 0.2s;
    }
    .lightbox-nav:hover { background: rgba(255,255,255,0.3); }
    .lightbox-prev { left: 1rem; }
    .lightbox-next { right: 1rem; }
    .lightbox-counter {
      color: rgba(255,255,255,0.7);
      font-size: 0.9rem;
      margin-top: 1rem;
    }

    /* Video */
    .video-wrapper {
      max-width: 800px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    .video-wrapper video {
      width: 100%;
      display: block;
    }

    /* Map */
    .map-section { background: #f9fafb; }
    .map-wrapper {
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    }
    .map-wrapper iframe {
      width: 100%;
      height: 400px;
      border: 0;
    }
    .map-note {
      margin-top: 1rem;
      font-size: 0.95rem;
      color: #6b7280;
    }

    /* Contact */
    .contact-section {
      background: #1a1a2e;
      color: #fff;
    }
    .contact-section .section-title { color: #fff; }
    .contact-section .section-title::after { background: #e8b004; }
    .contact-intro {
      color: rgba(255,255,255,0.8);
      font-size: 1.05rem;
      margin-bottom: 2rem;
      max-width: 550px;
    }
    .contact-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }
    .contact-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.85rem 1.5rem;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1rem;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
    .contact-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 14px rgba(0,0,0,0.3);
    }
    .contact-btn svg { width: 22px; height: 22px; fill: currentColor; }
    .btn-messenger { background: #0084FF; color: #fff; }
    .btn-viber { background: #7360F2; color: #fff; }
    .btn-whatsapp { background: #25D366; color: #fff; }
    .btn-phone { background: #e8b004; color: #1a1a2e; }

    /* Dream banner */
    .dream-banner {
      text-align: center;
      padding: 3rem 1.5rem;
      background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
    }
    .dream-banner p {
      max-width: 600px;
      margin: 0 auto;
      font-size: 1rem;
      color: #374151;
      line-height: 1.7;
    }
    .dream-banner .dream-heading {
      font-size: 1.2rem;
      font-weight: 700;
      color: #1a1a2e;
      margin-bottom: 0.75rem;
    }

    /* Footer */
    .page-footer {
      text-align: center;
      padding: 2rem 1.5rem;
      background: #111827;
      color: rgba(255,255,255,0.5);
      font-size: 0.85rem;
    }
    .page-footer a {
      color: #e8b004;
      text-decoration: none;
    }
    .page-footer a:hover { text-decoration: underline; }

    /* No story fallback */
    .no-story-note {
      max-width: 650px;
      font-size: 1.05rem;
      color: #374151;
    }

    /* Loading */
    .loading {
      text-align: center;
      padding: 4rem 1.5rem;
      color: #6b7280;
      font-size: 1.1rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hero { height: 70vh; min-height: 400px; }
      .hero-overlay { padding: 1.5rem; }
      .hero h1 { font-size: 1.65rem; }
      .hero-price { font-size: 1.5rem; }
      .section { padding: 2.5rem 1.25rem; }
      .vision-section { padding: 2.5rem 1.25rem; }
      .section-title { font-size: 1.3rem; }
      .gallery-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
      .contact-buttons { flex-direction: column; }
      .contact-btn { justify-content: center; }
      .lightbox-nav { padding: 0.5rem 0.75rem; font-size: 1.5rem; }
    }

    @media (max-width: 480px) {
      .hero h1 { font-size: 1.35rem; }
      .hero-price { font-size: 1.3rem; }
      .quick-stats { grid-template-columns: repeat(2, 1fr); }
      .features-grid { grid-template-columns: 1fr; }
      .gallery-grid { grid-template-columns: 1fr 1fr; gap: 0.5rem; }
    }
  </style>
</head>
<body>

  <div id="pageContent">
    <div class="loading">Loading property story...</div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <button class="lightbox-close" onclick="closeLightbox()" aria-label="Close">&times;</button>
    <button class="lightbox-nav lightbox-prev" onclick="navLightbox(-1)" aria-label="Previous">&#8249;</button>
    <img id="lightbox-img" src="" alt="Full size photo">
    <button class="lightbox-nav lightbox-next" onclick="navLightbox(1)" aria-label="Next">&#8250;</button>
    <div class="lightbox-counter" id="lightbox-counter"></div>
  </div>

  <script src="data/listings.js"></script>
  <script>
    // Helpers
    function esc(text) {
      var d = document.createElement('div');
      d.textContent = text || '';
      return d.innerHTML;
    }
    function formatPrice(n) {
      return '\u20B1' + Number(n).toLocaleString();
    }
    function formatNumber(n) {
      return Number(n).toLocaleString();
    }
    function getUrlParam(key) {
      var params = new URLSearchParams(window.location.search);
      return params.get(key);
    }
    function getLocationName(loc) {
      if (!loc) return '';
      return loc.split('-').map(function(w) { return w.charAt(0).toUpperCase() + w.slice(1); }).join(' ');
    }

    // Lightbox
    var photos = [];
    var currentIndex = 0;
    function openLightbox(index) {
      currentIndex = index;
      updateLightbox();
      document.getElementById('lightbox').classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    function closeLightbox() {
      document.getElementById('lightbox').classList.remove('active');
      document.body.style.overflow = '';
    }
    function navLightbox(dir) {
      currentIndex = (currentIndex + dir + photos.length) % photos.length;
      updateLightbox();
    }
    function updateLightbox() {
      document.getElementById('lightbox-img').src = photos[currentIndex];
      document.getElementById('lightbox-counter').textContent = (currentIndex + 1) + ' / ' + photos.length;
    }
    document.addEventListener('keydown', function(e) {
      if (!document.getElementById('lightbox').classList.contains('active')) return;
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowLeft') navLightbox(-1);
      if (e.key === 'ArrowRight') navLightbox(1);
    });
    document.getElementById('lightbox').addEventListener('click', function(e) {
      if (e.target === this) closeLightbox();
    });

    // SVG checkmark
    var checkSvg = '<div class="feature-check"><svg viewBox="0 0 16 16"><path d="M6.5 12.5l-4-4 1.4-1.4 2.6 2.6 5.6-5.6 1.4 1.4z"/></svg></div>';

    // Main render
    document.addEventListener('DOMContentLoaded', function() {
      var id = getUrlParam('id');
      if (!id || typeof LISTINGS_DATA === 'undefined') {
        document.getElementById('pageContent').innerHTML = '<div class="loading">Property not found. <a href="listings.html" style="color:#e8b004;">Browse all listings</a></div>';
        return;
      }

      var listing = null;
      for (var i = 0; i < LISTINGS_DATA.length; i++) {
        if (LISTINGS_DATA[i].id === id && LISTINGS_DATA[i].status === 'active') {
          listing = LISTINGS_DATA[i];
          break;
        }
      }

      if (!listing) {
        document.getElementById('pageContent').innerHTML = '<div class="loading">Property not found. <a href="listings.html" style="color:#e8b004;">Browse all listings</a></div>';
        return;
      }

      // Photos array
      photos = [];
      if (listing.photo_urls) {
        photos = listing.photo_urls.split(',').map(function(u) { return u.trim(); }).filter(Boolean);
      } else if (listing.photo_url) {
        photos = [listing.photo_url];
      }

      var mainPhoto = photos[0] || '';
      var locationName = getLocationName(listing.location);

      // Update page title and meta
      document.title = esc(listing.title) + ' — A Personal Page by CebuLandMarket';
      var metaDesc = document.getElementById('metaDesc');
      var ogTitleEl = document.getElementById('ogTitle');
      var ogDescEl = document.getElementById('ogDesc');
      var ogImageEl = document.getElementById('ogImage');
      if (metaDesc) metaDesc.setAttribute('content', (listing.story || listing.description || '').substring(0, 160));
      if (ogTitleEl) ogTitleEl.setAttribute('content', listing.title);
      if (ogDescEl) ogDescEl.setAttribute('content', (listing.story || listing.description || '').substring(0, 200));
      if (ogImageEl) ogImageEl.setAttribute('content', mainPhoto);

      // Build stats
      var statsHtml = '';
      if (listing.lot_area) statsHtml += '<div class="stat"><div class="stat-value">' + formatNumber(listing.lot_area) + ' sqm</div><div class="stat-label">Lot Area</div></div>';
      if (listing.price_per_sqm) statsHtml += '<div class="stat"><div class="stat-value">' + formatPrice(listing.price_per_sqm) + '</div><div class="stat-label">Per sqm</div></div>';
      if (listing.title_status) {
        var parts = listing.title_status.split(',');
        parts.forEach(function(p) {
          statsHtml += '<div class="stat"><div class="stat-value">' + esc(p.trim()) + '</div><div class="stat-label">Title</div></div>';
        });
      }

      // Build story section
      var storyHtml = '';
      if (listing.story) {
        var paragraphs = listing.story.split('\n').filter(Boolean);
        storyHtml = '<section class="section story"><h2 class="section-title">The Owner\'s Vision</h2>';
        paragraphs.forEach(function(p) {
          storyHtml += '<p>' + esc(p) + '</p>';
        });
        storyHtml += '</section>';
      } else {
        // Fallback: use description
        storyHtml = '<section class="section story"><h2 class="section-title">About This Property</h2><p class="no-story-note">' + esc(listing.description) + '</p></section>';
      }

      // Build vision cards
      var visionHtml = '';
      if (listing.vision_items) {
        var items = listing.vision_items.split('|');
        var visionIcons = ['\ud83c\udfe1', '\ud83e\uddd8', '\ud83c\udf3f', '\ud83c\udfe0', '\ud83d\udc02', '\u26fa', '\ud83c\udf04'];
        visionHtml = '<section class="vision-section"><div class="vision-inner"><h2 class="section-title">What The Owner Imagined Here</h2><div class="vision-grid">';
        for (var v = 0; v < items.length; v += 2) {
          var title = items[v] || '';
          var desc = items[v + 1] || '';
          var icon = visionIcons[v / 2] || '\u2728';
          visionHtml += '<div class="vision-card"><span class="vision-icon">' + icon + '</span><h3>' + esc(title) + '</h3><p>' + esc(desc) + '</p></div>';
        }
        visionHtml += '</div></div></section>';
      }

      // Build features
      var featuresHtml = '';
      if (listing.features) {
        var feats = listing.features.split(',').map(function(f) { return f.trim(); }).filter(Boolean);
        featuresHtml = '<section class="section"><h2 class="section-title">Property Features</h2><div class="features-grid">';
        feats.forEach(function(f) {
          featuresHtml += '<div class="feature-item">' + checkSvg + esc(f) + '</div>';
        });
        featuresHtml += '</div></section>';
      }

      // Build gallery
      var galleryHtml = '';
      if (photos.length > 0) {
        galleryHtml = '<section class="gallery-section"><div class="section"><h2 class="section-title">Photo Gallery</h2><div class="gallery-grid">';
        photos.forEach(function(url, idx) {
          galleryHtml += '<div class="gallery-item" onclick="openLightbox(' + idx + ')"><img src="' + esc(url) + '" alt="Property photo ' + (idx + 1) + '" loading="lazy"></div>';
        });
        galleryHtml += '</div></div></section>';
      }

      // Build video
      var videoHtml = '';
      if (listing.video_url) {
        if (listing.video_url.indexOf('youtu') !== -1) {
          var ytId = listing.video_url.replace(/.*(?:shorts\/|watch\?v=|youtu\.be\/)/, '').replace(/[?&].*/, '');
          videoHtml = '<section class="section"><h2 class="section-title">Property Video</h2><div class="video-wrapper"><iframe src="https://www.youtube-nocookie.com/embed/' + ytId + '" frameborder="0" allowfullscreen style="width:100%;aspect-ratio:16/9;"></iframe></div></section>';
        } else {
          videoHtml = '<section class="section"><h2 class="section-title">Property Video</h2><div class="video-wrapper"><video controls preload="metadata" poster="' + esc(mainPhoto) + '"><source src="' + esc(listing.video_url) + '" type="video/mp4">Your browser does not support the video element.</video></div></section>';
        }
      }

      // Build map
      var mapHtml = '';
      if (listing.map_url) {
        mapHtml = '<section class="map-section"><div class="section"><h2 class="section-title">Location</h2><div class="map-wrapper"><iframe src="https://maps.google.com/maps?q=' + encodeURIComponent(listing.map_url) + '&output=embed" allowfullscreen loading="lazy" title="Property location"></iframe></div><p class="map-note">' + esc(listing.address || listing.map_url) + '</p></div></section>';
      }

      // Build contact
      var contactHtml = '';
      if (listing.messenger) {
        contactHtml += '<a href="' + esc(listing.messenger) + '" target="_blank" rel="noopener" class="contact-btn btn-messenger"><svg viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.145 2 11.243c0 2.908 1.434 5.503 3.678 7.2V22l3.378-1.852c.902.25 1.858.385 2.944.385 5.523 0 10-4.145 10-9.243S17.523 2 12 2zm1.065 12.439l-2.55-2.724-4.976 2.724 5.476-5.81 2.615 2.724 4.91-2.724-5.475 5.81z"/></svg>Messenger</a>';
      }
      if (listing.viber) {
        contactHtml += '<a href="viber://chat?number=' + esc(listing.viber.replace(/\s/g, '')) + '" target="_blank" rel="noopener" class="contact-btn btn-viber"><svg viewBox="0 0 24 24"><path d="M20.317 4.157c-1.468-1.468-6.073-2.478-8.317-2.157-2.244-.321-6.849.689-8.317 2.157C2.106 5.734 1.5 8.09 1.5 12s.606 6.266 2.183 7.843c1.468 1.468 6.073 2.478 8.317 2.157 2.244.321 6.849-.689 8.317-2.157C21.894 18.266 22.5 15.91 22.5 12s-.606-6.266-2.183-7.843zM16.5 15.75c-.5.5-1.25.75-2 .75-1.5 0-3.5-1-5-2.5s-2.5-3.5-2.5-5c0-.75.25-1.5.75-2s1-.75 1.5-.75c.25 0 .5.25.75.75l1 2c.125.25 0 .5-.25.75l-.5.5c-.125.125-.125.375 0 .625.5 1 1.5 2 2.5 2.5.25.125.5.125.625 0l.5-.5c.25-.25.5-.375.75-.25l2 1c.5.25.75.5.75.75 0 .5-.25 1-.75 1.5z"/></svg>Viber</a>';
      }
      if (listing.whatsapp) {
        var waNum = listing.whatsapp.replace(/[\s\-]/g, '');
        contactHtml += '<a href="https://wa.me/' + waNum + '?text=' + encodeURIComponent("Hi, I saw the property page for " + listing.title + " and I'm interested.") + '" target="_blank" rel="noopener" class="contact-btn btn-whatsapp"><svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>WhatsApp</a>';
      }
      if (listing.phone) {
        contactHtml += '<a href="tel:' + esc(listing.phone) + '" class="contact-btn btn-phone"><svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>Call</a>';
      }

      // Build full page
      var html = '';

      // Hero
      html += '<section class="hero">';
      html += '<img src="' + esc(mainPhoto) + '" alt="' + esc(listing.title) + '">';
      html += '<div class="hero-overlay">';
      html += '<div class="hero-badge">A Personal Page</div>';
      html += '<h1>' + esc(listing.title) + '</h1>';
      html += '<div class="hero-sub">' + esc(listing.address || locationName + ', Cebu') + '</div>';
      html += '<div class="hero-price">' + formatPrice(listing.total_price);
      if (listing.price_per_sqm) html += ' <span>' + formatPrice(listing.price_per_sqm) + '/sqm</span>';
      html += '</div>';
      html += '</div></section>';

      // Quick stats
      html += '<div class="quick-stats">' + statsHtml + '</div>';

      // Story
      html += storyHtml;

      // Vision
      html += visionHtml;

      // Features
      html += featuresHtml;

      // Gallery
      html += galleryHtml;

      // Video
      html += videoHtml;

      // Map
      html += mapHtml;

      // Contact
      html += '<section class="contact-section"><div class="section">';
      html += '<h2 class="section-title">Want to See the Property?</h2>';
      html += '<p class="contact-intro">Reach out through any of the channels below. No pressure — just come have a look.</p>';
      html += '<div class="contact-buttons">' + contactHtml + '</div>';
      html += '</div></section>';

      // Dream banner
      html += '<section class="dream-banner">';
      html += '<p class="dream-heading">Every Property Has a Story</p>';
      html += '<p>At CebuLandMarket, we create a personal page for every approved listing — because selling a property isn\'t about giving up a dream. It\'s about sharing it with someone who\'ll carry it forward.</p>';
      html += '<p style="margin-top:1rem;"><a href="submit.html" style="color:#e8b004; font-weight:600; text-decoration:none;">List your property</a> and we\'ll tell your story too.</p>';
      html += '</section>';

      // Footer
      html += '<footer class="page-footer">';
      html += '<p>This personal page was created by <a href="https://cebulandmarket.com">CebuLandMarket</a> — Property Listings in Cebu, Philippines</p>';
      html += '</footer>';

      document.getElementById('pageContent').innerHTML = html;
    });
  </script>
</body>
</html>
